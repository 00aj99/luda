{"version":3,"file":"site.js","sources":["../../coffee/documentation.coffee","../../coffee/theme.coffee"],"sourcesContent":["(->\r\n  docAsideScrollTop = 0\r\n\r\n  luda.on 'turbolinks:before-visit', (e) ->\r\n    $container = luda.$child '#doc-aside'\r\n    docAsideScrollTop = if $container then $container.scrollTop else 0\r\n\r\n  luda.on 'turbolinks:render', (e) ->\r\n    $container = luda.$child '#doc-aside'\r\n    $container.scrollTop = docAsideScrollTop if $container\r\n\r\n\r\n\r\n  clipboard = null\r\n\r\n  renderCode = ->\r\n    $codes = luda.$children '.highlight:not(.rendered)'\r\n    $codes.forEach ($code) ->\r\n      $code.classList.add 'rendered'\r\n      $code.outerHTML = \"<div class='rel'>\\\r\n      <button type='button' \\\r\n      class='code-copy abs-r abs-t zi-high btn btn-small btn-secondary'>\\\r\n      Copy</button>#{$code.outerHTML}</div>\"\r\n\r\n  initClipboard = ->\r\n    clipboard.destroy() if clipboard\r\n    clipboard = new ClipboardJS('.code-copy', {\r\n      target: (trigger) -> trigger.nextElementSibling\r\n    })\r\n    clipboard.on 'success', (e) ->\r\n      e.clearSelection()\r\n      e.trigger.classList.remove 'focus'\r\n      e.trigger.innerText = 'Copied!'\r\n      e.trigger.classList.add 'btn-primary'\r\n      e.trigger.classList.remove 'btn-secondary'\r\n      setTimeout ->\r\n        e.trigger.innerText = 'Copy'\r\n        e.trigger.classList.add 'btn-secondary'\r\n        e.trigger.classList.remove 'btn-primary'\r\n      , 2000\r\n\r\n  initCode = ->\r\n    renderCode()\r\n    initClipboard()\r\n\r\n  luda.on 'docready', initCode\r\n  luda.on 'turbolinks:render', initCode\r\n\r\n\r\n\r\n  insertSubNav = ->\r\n    selectors = '#doc-container h2[id],\\\r\n    #doc-container h3[id],\\\r\n    #doc-container h4[id]'\r\n    $titles = luda.$children selectors\r\n    items = ''\r\n    if $titles.length\r\n      $titles.forEach ($title) ->\r\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\r\n        class='doc-sub-nav-item td-none'>\\\r\n        #{$title.innerText.replace(/^#/, '').replace(/modifier$/i, '')}</a>\"\r\n        switch $title.tagName.toLowerCase()\r\n          when 'h2'\r\n            items += \"<p class='mt-small py-none text-ellipsis'>#{link}</p>\"\r\n          when 'h3'\r\n            items += \"<p class='p6 pl-small py-none text-ellipsis'>#{link}</p>\"\r\n          else\r\n            items += \"<p class='p6 pl-medium py-none text-ellipsis'>#{link}</p>\"\r\n      luda.$child('#doc-sub-nav .nav-items').innerHTML = items\r\n\r\n  luda.on 'docready', insertSubNav\r\n  luda.on 'turbolinks:render', insertSubNav\r\n\r\n\r\n\r\n  appendAnchors = ->\r\n    selectors = '#doc-container h2[id]:not(.rendered),\\\r\n    #doc-container h3[id]:not(.rendered),\\\r\n    #doc-container h4[id]:not(.rendered),\\\r\n    #doc-container h5[id]:not(.rendered),\\\r\n    #doc-container h6[id]:not(.rendered)'\r\n    $titles = luda.$children selectors\r\n    if $titles.length\r\n      $titles.forEach ($title) ->\r\n        $title.classList.add 'rendered'\r\n        $title.classList.add 'rel'\r\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\r\n        class='doc-anchor abs td-none c-primary'>#</a>\"\r\n        $title.insertAdjacentHTML 'afterBegin', link\r\n\r\n  luda.on 'docready', appendAnchors\r\n  luda.on 'turbolinks:render', appendAnchors\r\n)()","(->\r\n  APPLIED_THEME_ATTRIBUTE = 'data-applied-theme'\r\n  THEME_PATH_PATTERN_ATTRIBUTE = 'data-theme-path-pattern'\r\n  THEME_PATH_PLACEHOLDER = '$theme$'\r\n  APPLIED_THEME_STYLE_ATTRIBUTE = 'data-theme-style'\r\n  SHOW_FOR_THEME_ATTRIBUTE = 'data-theme'\r\n  HIDDEN_CLASS = 'd-none'\r\n  CHANGING_CLASS = 'changing-theme'\r\n  TRIGGER_SELECTOR = '.change-theme'\r\n  isChanging = false\r\n\r\n\r\n\r\n  appliedTheme = ->\r\n    document.documentElement.getAttribute APPLIED_THEME_ATTRIBUTE\r\n\r\n\r\n\r\n  loadTheme = (theme, callback) ->\r\n    pathPattern = document.documentElement.getAttribute \\\r\n    THEME_PATH_PATTERN_ATTRIBUTE\r\n    $appliedTheme = luda.$child \"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\"\r\n    $theme = document.createElement 'link'\r\n    $theme.rel = 'stylesheet'\r\n    $theme.type = 'text/css'\r\n    $theme.setAttribute APPLIED_THEME_STYLE_ATTRIBUTE, theme\r\n    $theme.href = pathPattern.replace THEME_PATH_PLACEHOLDER, theme\r\n    $theme.onload = callback\r\n    document.head.replaceChild $theme, $appliedTheme\r\n\r\n\r\n\r\n  changeTheme = (theme) ->\r\n    unless isChanging or theme is appliedTheme()\r\n      isChanging = true\r\n      document.documentElement.setAttribute APPLIED_THEME_ATTRIBUTE, theme\r\n      document.body.classList.add CHANGING_CLASS\r\n      setTimeout(->\r\n        loadTheme theme, ->\r\n          toggleThemeElements()\r\n          document.body.classList.remove CHANGING_CLASS\r\n          setTimeout(->\r\n            isChanging = false\r\n          , 500)\r\n      , 500)\r\n\r\n\r\n\r\n  removeOldThemes = ->\r\n    appliedThemeName = appliedTheme()\r\n    luda.$children(\"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\").forEach ($theme) ->\r\n      themeName = $theme.getAttribute APPLIED_THEME_STYLE_ATTRIBUTE\r\n      $theme.remove() unless themeName is appliedThemeName\r\n\r\n\r\n\r\n  toggleThemeElements = ($range) ->\r\n    appliedThemeName = appliedTheme()\r\n    luda.$children(\"[#{SHOW_FOR_THEME_ATTRIBUTE}]\", $range).forEach ($ele) ->\r\n      themeName = $ele.getAttribute SHOW_FOR_THEME_ATTRIBUTE\r\n      if themeName is appliedThemeName\r\n        $ele.classList.remove HIDDEN_CLASS\r\n      else\r\n        $ele.classList.add HIDDEN_CLASS\r\n\r\n\r\n\r\n  luda.on 'change', TRIGGER_SELECTOR, -> changeTheme(this.value)\r\n  luda.on 'turbolinks:render', -> removeOldThemes()\r\n  luda.on 'turbolinks:before-render', (e) ->\r\n    toggleThemeElements(e.data.newBody)\r\n  luda.on 'turbolinks:load', (e) ->\r\n    toggleThemeElements() unless e.data.timing.requestStart\r\n)()"],"names":[],"mappings":"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"}