{"version":3,"sources":["../../coffee/documentation.coffee","../../coffee/theme.coffee"],"names":["appendAnchors","clipboard","docAsideScrollTop","initClipboard","initCode","insertSubNav","renderCode","luda","on","e","$container","$child","scrollTop","$codes","$children","forEach","$code","classList","add","outerHTML","destroy","ClipboardJS","target","trigger","nextElementSibling","clearSelection","remove","innerText","setTimeout","$titles","items","selectors","length","$title","link","id","replace","tagName","toLowerCase","innerHTML","insertAdjacentHTML","APPLIED_THEME_ATTRIBUTE","APPLIED_THEME_STYLE_ATTRIBUTE","CHANGING_CLASS","HIDDEN_CLASS","SHOW_FOR_THEME_ATTRIBUTE","THEME_PATH_PATTERN_ATTRIBUTE","THEME_PATH_PLACEHOLDER","TRIGGER_SELECTOR","appliedTheme","changeTheme","isChanging","loadTheme","removeOldThemes","toggleThemeElements","document","documentElement","getAttribute","theme","callback","$appliedTheme","$theme","pathPattern","createElement","rel","type","setAttribute","href","onload","head","replaceChild","body","appliedThemeName","themeName","$range","$ele","this","value","data","newBody","timing","requestStart"],"mappings":";;;;;4LAAA,WACE,IAAAA,cAAAC,UAAAC,kBAAAC,cAAAC,SAAAC,aAAAC,WAAAJ,kBAAoB,EAEpBK,KAAKC,GAAG,0BAA2B,SAACC,GAClC,IAAAC,WAAAA,WAAaH,KAAKI,OAAO,qBACzBT,kBAAuBQ,WAAgBA,WAAWE,UAAe,IAEnEL,KAAKC,GAAG,oBAAqB,SAACC,GAC5B,IAAAC,WAAAA,WAAaH,KAAKI,OAAO,cACzB,GAA4CD,WAA5C,QAAAA,WAAWE,UAAYV,qBAIzBD,UAAY,KAEZK,WAAa,WACX,IAAAO,OAAAA,OAASN,KAAKO,UAAU,oCACxBD,OAAOE,QAAQ,SAACC,OACdA,MAAMC,UAAUC,IAAI,mBACpBF,MAAMG,mIAGSH,MAAMG,qBAEzBhB,cAAgB,WACd,GAAuBF,UAAvB,CAAAA,UAAUmB,UACVnB,UAAY,IAAIoB,YAAY,aAAc,CACxCC,OAAQ,SAACC,gBAAYA,QAAQC,6BAE/BvB,UAAUO,GAAG,UAAW,SAACC,GACvBA,EAAEgB,iBACFhB,EAAEc,QAAQN,UAAUS,OAAO,SAC3BjB,EAAEc,QAAQI,UAAY,UACtBlB,EAAEc,QAAQN,UAAUC,IAAI,eACxBT,EAAEc,QAAQN,UAAUS,OAAO,wBAC3BE,WAAW,WACTnB,EAAEc,QAAQI,UAAY,OACtBlB,EAAEc,QAAQN,UAAUC,IAAI,wBACxBT,EAAEc,QAAQN,UAAUS,OAAO,gBAC3B,QAENtB,SAAW,WACTE,oBACAH,iBAEFI,KAAKC,GAAG,WAAYJ,UACpBG,KAAKC,GAAG,oBAAqBJ,UAI7BC,aAAe,WACb,IAAAwB,QAAAC,MAAAC,UAAAA,UAAY,oEAGZF,QAAUtB,KAAKO,UAAUiB,WACzBD,MAAQ,GACR,GAAGD,QAAQG,OAAX,CACEH,QAAQd,QAAQ,SAACkB,QACf,IAAAC,KAAAA,kBAAoBD,OAAOE,gEAEzBF,OAAON,UAAUS,QAAQ,KAAM,IAAIA,QAAQ,aAAc,UAC3D,OAAOH,OAAOI,QAAQC,eAAtB,IACO,YACHR,oDAAsDI,WAF1D,IAGO,YACHJ,uDAAyDI,WAJ7D,eAMIJ,wDAA0DI,qBAChE3B,KAAKI,OAAO,2BAA2B4B,UAAYT,QAEvDvB,KAAKC,GAAG,WAAYH,cACpBE,KAAKC,GAAG,oBAAqBH,cAI7BL,cAAgB,WACd,IAAA6B,QAAAE,UAAAA,UAAY,2LAKZF,QAAUtB,KAAKO,UAAUiB,WACzB,GAAGF,QAAQG,OAAX,QACEH,QAAQd,QAAQ,SAACkB,QACf,IAAAC,KAAAD,OAAOhB,UAAUC,IAAI,YACrBe,OAAOhB,UAAUC,IAAI,OACrBgB,kBAAoBD,OAAOE,oFAE3BF,OAAOO,mBAAmB,aAAcN,UAE9C3B,KAAKC,GAAG,WAAYR,sBACpBO,KAAKC,GAAG,oBAAqBR,gBA3F/B,ICAA,WACE,IAAAyC,wBAAAC,8BAAAC,eAAAC,aAAAC,yBAAAC,6BAAAC,uBAAAC,iBAAAC,aAAAC,YAAAC,WAAAC,UAAAC,gBAAAC,oBAAAb,wBAA0B,qBAC1BK,6BAA+B,0BAC/BC,uBAAyB,UACzBL,8BAAgC,mBAChCG,yBAA2B,aAC3BD,aAAe,SACfD,eAAiB,iBACjBK,iBAAmB,gBACnBG,WAAa,MAIbF,aAAe,kBACbM,SAASC,gBAAgBC,aAAahB,0BAIxCW,UAAY,SAACM,MAAOC,UAClB,IAAAC,cAAAC,OAAAC,YAAAA,YAAcP,SAASC,gBAAgBC,aACvCX,8BACAc,cAAgBrD,KAAKI,WAAW+B,kCAChCmB,OAASN,SAASQ,cAAc,QAChCF,OAAOG,IAAM,aACbH,OAAOI,KAAO,WACdJ,OAAOK,aAAaxB,8BAA+BgB,OACnDG,OAAOM,KAAOL,YAAY1B,QAAQW,uBAAwBW,OAC1DG,OAAOO,OAAST,gBAChBJ,SAASc,KAAKC,aAAaT,OAAQD,gBAIrCV,YAAc,SAACQ,OACb,KAAOP,YAAcO,QAAST,gBAA9B,CACEE,WAAa,KACbI,SAASC,gBAAgBU,aAAazB,wBAAyBiB,OAC/DH,SAASgB,KAAKtD,UAAUC,IAAIyB,uBAC5Bf,WAAW,kBACTwB,UAAUM,MAAO,WACfJ,sBACAC,SAASgB,KAAKtD,UAAUS,OAAOiB,uBAC/Bf,WAAW,kBACTuB,WAAa,OACb,QACJ,OAINE,gBAAkB,WAChB,IAAAmB,iBAAAA,iBAAmBvB,sBACnB1C,KAAKO,cAAc4B,kCAAkC3B,QAAQ,SAAC8C,QAC5D,IAAAY,UAAAA,UAAYZ,OAAOJ,aAAaf,+BAChC,GAAuB+B,YAAaD,iBAApC,QAAAX,OAAOnC,aAIX4B,oBAAsB,SAACoB,QACrB,IAAAF,iBAAAA,iBAAmBvB,sBACnB1C,KAAKO,cAAc+B,4BAA6B6B,QAAQ3D,QAAQ,SAAC4D,MAC/D,IAAAF,UAAAA,UAAYE,KAAKlB,aAAaZ,0BAC9B,GAAG4B,YAAaD,iBAAhB,QACEG,KAAK1D,UAAUS,OAAOkB,kBADxB,QAGE+B,KAAK1D,UAAUC,IAAI0B,kBAIzBrC,KAAKC,GAAG,SAAUwC,iBAAkB,kBAAGE,YAAY0B,KAAKC,SACxDtE,KAAKC,GAAG,oBAAqB,kBAAG6C,oBAChC9C,KAAKC,GAAG,2BAA4B,SAACC,UACnC6C,oBAAoB7C,EAAEqE,KAAKC,kBAC7BxE,KAAKC,GAAG,kBAAmB,SAACC,GAC1B,IAA6BA,EAAEqE,KAAKE,OAAOC,aAA3C,QAAA3B,0BAxEJ","sourcesContent":["(->\n  docAsideScrollTop = 0\n\n  luda.on 'turbolinks:before-visit', (e) ->\n    $container = luda.$child '#doc-aside'\n    docAsideScrollTop = if $container then $container.scrollTop else 0\n\n  luda.on 'turbolinks:render', (e) ->\n    $container = luda.$child '#doc-aside'\n    $container.scrollTop = docAsideScrollTop if $container\n\n\n\n  clipboard = null\n\n  renderCode = ->\n    $codes = luda.$children '.highlight:not(.rendered)'\n    $codes.forEach ($code) ->\n      $code.classList.add 'rendered'\n      $code.outerHTML = \"<div class='rel'>\\\n      <button type='button' \\\n      class='code-copy abs-r abs-t zi-high btn btn-small btn-secondary'>\\\n      Copy</button>#{$code.outerHTML}</div>\"\n\n  initClipboard = ->\n    clipboard.destroy() if clipboard\n    clipboard = new ClipboardJS('.code-copy', {\n      target: (trigger) -> trigger.nextElementSibling\n    })\n    clipboard.on 'success', (e) ->\n      e.clearSelection()\n      e.trigger.classList.remove 'focus'\n      e.trigger.innerText = 'Copied!'\n      e.trigger.classList.add 'btn-primary'\n      e.trigger.classList.remove 'btn-secondary'\n      setTimeout ->\n        e.trigger.innerText = 'Copy'\n        e.trigger.classList.add 'btn-secondary'\n        e.trigger.classList.remove 'btn-primary'\n      , 2000\n\n  initCode = ->\n    renderCode()\n    initClipboard()\n\n  luda.on 'docready', initCode\n  luda.on 'turbolinks:render', initCode\n\n\n\n  insertSubNav = ->\n    selectors = '#doc-container h2[id],\\\n    #doc-container h3[id],\\\n    #doc-container h4[id]'\n    $titles = luda.$children selectors\n    items = ''\n    if $titles.length\n      $titles.forEach ($title) ->\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\n        class='doc-sub-nav-item td-none'>\\\n        #{$title.innerText.replace(/^#/, '').replace(/modifier$/i, '')}</a>\"\n        switch $title.tagName.toLowerCase()\n          when 'h2'\n            items += \"<p class='mt-small py-none text-ellipsis'>#{link}</p>\"\n          when 'h3'\n            items += \"<p class='p6 pl-small py-none text-ellipsis'>#{link}</p>\"\n          else\n            items += \"<p class='p6 pl-medium py-none text-ellipsis'>#{link}</p>\"\n      luda.$child('#doc-sub-nav .nav-items').innerHTML = items\n\n  luda.on 'docready', insertSubNav\n  luda.on 'turbolinks:render', insertSubNav\n\n\n\n  appendAnchors = ->\n    selectors = '#doc-container h2[id]:not(.rendered),\\\n    #doc-container h3[id]:not(.rendered),\\\n    #doc-container h4[id]:not(.rendered),\\\n    #doc-container h5[id]:not(.rendered),\\\n    #doc-container h6[id]:not(.rendered)'\n    $titles = luda.$children selectors\n    if $titles.length\n      $titles.forEach ($title) ->\n        $title.classList.add 'rendered'\n        $title.classList.add 'rel'\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\n        class='doc-anchor abs td-none c-primary'>#</a>\"\n        $title.insertAdjacentHTML 'afterBegin', link\n\n  luda.on 'docready', appendAnchors\n  luda.on 'turbolinks:render', appendAnchors\n)()","(->\n  APPLIED_THEME_ATTRIBUTE = 'data-applied-theme'\n  THEME_PATH_PATTERN_ATTRIBUTE = 'data-theme-path-pattern'\n  THEME_PATH_PLACEHOLDER = '$theme$'\n  APPLIED_THEME_STYLE_ATTRIBUTE = 'data-theme-style'\n  SHOW_FOR_THEME_ATTRIBUTE = 'data-theme'\n  HIDDEN_CLASS = 'd-none'\n  CHANGING_CLASS = 'changing-theme'\n  TRIGGER_SELECTOR = '.change-theme'\n  isChanging = false\n\n\n\n  appliedTheme = ->\n    document.documentElement.getAttribute APPLIED_THEME_ATTRIBUTE\n\n\n\n  loadTheme = (theme, callback) ->\n    pathPattern = document.documentElement.getAttribute \\\n    THEME_PATH_PATTERN_ATTRIBUTE\n    $appliedTheme = luda.$child \"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\"\n    $theme = document.createElement 'link'\n    $theme.rel = 'stylesheet'\n    $theme.type = 'text/css'\n    $theme.setAttribute APPLIED_THEME_STYLE_ATTRIBUTE, theme\n    $theme.href = pathPattern.replace THEME_PATH_PLACEHOLDER, theme\n    $theme.onload = callback\n    document.head.replaceChild $theme, $appliedTheme\n\n\n\n  changeTheme = (theme) ->\n    unless isChanging or theme is appliedTheme()\n      isChanging = true\n      document.documentElement.setAttribute APPLIED_THEME_ATTRIBUTE, theme\n      document.body.classList.add CHANGING_CLASS\n      setTimeout(->\n        loadTheme theme, ->\n          toggleThemeElements()\n          document.body.classList.remove CHANGING_CLASS\n          setTimeout(->\n            isChanging = false\n          , 500)\n      , 500)\n\n\n\n  removeOldThemes = ->\n    appliedThemeName = appliedTheme()\n    luda.$children(\"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\").forEach ($theme) ->\n      themeName = $theme.getAttribute APPLIED_THEME_STYLE_ATTRIBUTE\n      $theme.remove() unless themeName is appliedThemeName\n\n\n\n  toggleThemeElements = ($range) ->\n    appliedThemeName = appliedTheme()\n    luda.$children(\"[#{SHOW_FOR_THEME_ATTRIBUTE}]\", $range).forEach ($ele) ->\n      themeName = $ele.getAttribute SHOW_FOR_THEME_ATTRIBUTE\n      if themeName is appliedThemeName\n        $ele.classList.remove HIDDEN_CLASS\n      else\n        $ele.classList.add HIDDEN_CLASS\n\n\n\n  luda.on 'change', TRIGGER_SELECTOR, -> changeTheme(this.value)\n  luda.on 'turbolinks:render', -> removeOldThemes()\n  luda.on 'turbolinks:before-render', (e) ->\n    toggleThemeElements(e.data.newBody)\n  luda.on 'turbolinks:load', (e) ->\n    toggleThemeElements() unless e.data.timing.requestStart\n)()"]}