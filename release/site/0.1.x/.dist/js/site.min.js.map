{"version":3,"sources":["../../coffee/documentation.coffee","../../coffee/theme.coffee"],"names":["appendAnchors","clipboard","docAsideScrollTop","initClipboard","initCode","insertSubNav","renderCode","luda","on","e","$container","$child","scrollTop","$codes","$children","forEach","$code","classList","add","outerHTML","destroy","ClipboardJS","target","trigger","nextElementSibling","clearSelection","remove","innerText","setTimeout","$titles","items","selectors","length","$title","link","id","replace","tagName","toLowerCase","innerHTML","insertAdjacentHTML","APPLIED_THEME_ATTRIBUTE","APPLIED_THEME_STYLE_ATTRIBUTE","CHANGING_CLASS","HIDDEN_CLASS","SHOW_FOR_THEME_ATTRIBUTE","THEME_PATH_PATTERN_ATTRIBUTE","THEME_PATH_PLACEHOLDER","TRIGGER_SELECTOR","appliedTheme","changeTheme","isChanging","loadTheme","removeOldThemes","toggleThemeElements","document","documentElement","getAttribute","theme","callback","$appliedTheme","$theme","pathPattern","createElement","rel","type","setAttribute","href","onload","head","replaceChild","body","appliedThemeName","themeName","$range","$ele","this","value","data","newBody","timing","requestStart"],"mappings":"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","sourcesContent":["(->\r\n  docAsideScrollTop = 0\r\n\r\n  luda.on 'turbolinks:before-visit', (e) ->\r\n    $container = luda.$child '#doc-aside'\r\n    docAsideScrollTop = if $container then $container.scrollTop else 0\r\n\r\n  luda.on 'turbolinks:render', (e) ->\r\n    $container = luda.$child '#doc-aside'\r\n    $container.scrollTop = docAsideScrollTop if $container\r\n\r\n\r\n\r\n  clipboard = null\r\n\r\n  renderCode = ->\r\n    $codes = luda.$children '.highlight:not(.rendered)'\r\n    $codes.forEach ($code) ->\r\n      $code.classList.add 'rendered'\r\n      $code.outerHTML = \"<div class='rel'>\\\r\n      <button type='button' \\\r\n      class='code-copy abs-r abs-t zi-high btn btn-small btn-secondary'>\\\r\n      Copy</button>#{$code.outerHTML}</div>\"\r\n\r\n  initClipboard = ->\r\n    clipboard.destroy() if clipboard\r\n    clipboard = new ClipboardJS('.code-copy', {\r\n      target: (trigger) -> trigger.nextElementSibling\r\n    })\r\n    clipboard.on 'success', (e) ->\r\n      e.clearSelection()\r\n      e.trigger.classList.remove 'focus'\r\n      e.trigger.innerText = 'Copied!'\r\n      e.trigger.classList.add 'btn-primary'\r\n      e.trigger.classList.remove 'btn-secondary'\r\n      setTimeout ->\r\n        e.trigger.innerText = 'Copy'\r\n        e.trigger.classList.add 'btn-secondary'\r\n        e.trigger.classList.remove 'btn-primary'\r\n      , 2000\r\n\r\n  initCode = ->\r\n    renderCode()\r\n    initClipboard()\r\n\r\n  luda.on 'docready', initCode\r\n  luda.on 'turbolinks:render', initCode\r\n\r\n\r\n\r\n  insertSubNav = ->\r\n    selectors = '#doc-container h2[id],\\\r\n    #doc-container h3[id],\\\r\n    #doc-container h4[id]'\r\n    $titles = luda.$children selectors\r\n    items = ''\r\n    if $titles.length\r\n      $titles.forEach ($title) ->\r\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\r\n        class='doc-sub-nav-item td-none'>\\\r\n        #{$title.innerText.replace(/^#/, '').replace(/modifier$/i, '')}</a>\"\r\n        switch $title.tagName.toLowerCase()\r\n          when 'h2'\r\n            items += \"<p class='mt-small py-none text-ellipsis'>#{link}</p>\"\r\n          when 'h3'\r\n            items += \"<p class='p6 pl-small py-none text-ellipsis'>#{link}</p>\"\r\n          else\r\n            items += \"<p class='p6 pl-medium py-none text-ellipsis'>#{link}</p>\"\r\n      luda.$child('#doc-sub-nav .nav-items').innerHTML = items\r\n\r\n  luda.on 'docready', insertSubNav\r\n  luda.on 'turbolinks:render', insertSubNav\r\n\r\n\r\n\r\n  appendAnchors = ->\r\n    selectors = '#doc-container h2[id]:not(.rendered),\\\r\n    #doc-container h3[id]:not(.rendered),\\\r\n    #doc-container h4[id]:not(.rendered),\\\r\n    #doc-container h5[id]:not(.rendered),\\\r\n    #doc-container h6[id]:not(.rendered)'\r\n    $titles = luda.$children selectors\r\n    if $titles.length\r\n      $titles.forEach ($title) ->\r\n        $title.classList.add 'rendered'\r\n        $title.classList.add 'rel'\r\n        link = \"<a href='##{$title.id}' data-turbolinks='false' \\\r\n        class='doc-anchor abs td-none c-primary'>#</a>\"\r\n        $title.insertAdjacentHTML 'afterBegin', link\r\n\r\n  luda.on 'docready', appendAnchors\r\n  luda.on 'turbolinks:render', appendAnchors\r\n)()","(->\r\n  APPLIED_THEME_ATTRIBUTE = 'data-applied-theme'\r\n  THEME_PATH_PATTERN_ATTRIBUTE = 'data-theme-path-pattern'\r\n  THEME_PATH_PLACEHOLDER = '$theme$'\r\n  APPLIED_THEME_STYLE_ATTRIBUTE = 'data-theme-style'\r\n  SHOW_FOR_THEME_ATTRIBUTE = 'data-theme'\r\n  HIDDEN_CLASS = 'd-none'\r\n  CHANGING_CLASS = 'changing-theme'\r\n  TRIGGER_SELECTOR = '.change-theme'\r\n  isChanging = false\r\n\r\n\r\n\r\n  appliedTheme = ->\r\n    document.documentElement.getAttribute APPLIED_THEME_ATTRIBUTE\r\n\r\n\r\n\r\n  loadTheme = (theme, callback) ->\r\n    pathPattern = document.documentElement.getAttribute \\\r\n    THEME_PATH_PATTERN_ATTRIBUTE\r\n    $appliedTheme = luda.$child \"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\"\r\n    $theme = document.createElement 'link'\r\n    $theme.rel = 'stylesheet'\r\n    $theme.type = 'text/css'\r\n    $theme.setAttribute APPLIED_THEME_STYLE_ATTRIBUTE, theme\r\n    $theme.href = pathPattern.replace THEME_PATH_PLACEHOLDER, theme\r\n    $theme.onload = callback\r\n    document.head.replaceChild $theme, $appliedTheme\r\n\r\n\r\n\r\n  changeTheme = (theme) ->\r\n    unless isChanging or theme is appliedTheme()\r\n      isChanging = true\r\n      document.documentElement.setAttribute APPLIED_THEME_ATTRIBUTE, theme\r\n      document.body.classList.add CHANGING_CLASS\r\n      setTimeout(->\r\n        loadTheme theme, ->\r\n          toggleThemeElements()\r\n          document.body.classList.remove CHANGING_CLASS\r\n          setTimeout(->\r\n            isChanging = false\r\n          , 500)\r\n      , 500)\r\n\r\n\r\n\r\n  removeOldThemes = ->\r\n    appliedThemeName = appliedTheme()\r\n    luda.$children(\"[#{APPLIED_THEME_STYLE_ATTRIBUTE}]\").forEach ($theme) ->\r\n      themeName = $theme.getAttribute APPLIED_THEME_STYLE_ATTRIBUTE\r\n      $theme.remove() unless themeName is appliedThemeName\r\n\r\n\r\n\r\n  toggleThemeElements = ($range) ->\r\n    appliedThemeName = appliedTheme()\r\n    luda.$children(\"[#{SHOW_FOR_THEME_ATTRIBUTE}]\", $range).forEach ($ele) ->\r\n      themeName = $ele.getAttribute SHOW_FOR_THEME_ATTRIBUTE\r\n      if themeName is appliedThemeName\r\n        $ele.classList.remove HIDDEN_CLASS\r\n      else\r\n        $ele.classList.add HIDDEN_CLASS\r\n\r\n\r\n\r\n  luda.on 'change', TRIGGER_SELECTOR, -> changeTheme(this.value)\r\n  luda.on 'turbolinks:render', -> removeOldThemes()\r\n  luda.on 'turbolinks:before-render', (e) ->\r\n    toggleThemeElements(e.data.newBody)\r\n  luda.on 'turbolinks:load', (e) ->\r\n    toggleThemeElements() unless e.data.timing.requestStart\r\n)()"]}